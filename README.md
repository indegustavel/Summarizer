# API de Sumariza√ß√£o de Textos

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://www.python.org/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.100+-green.svg)](https://fastapi.tiangolo.com/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

Uma API robusta e eficiente para sumariza√ß√£o de textos em portugu√™s, desenvolvida com FastAPI e modelos de intelig√™ncia artificial avan√ßados.

## üìã Vis√£o Geral

Esta API oferece dois m√©todos principais de sumariza√ß√£o:

- **Sumariza√ß√£o Extrativa**: Seleciona as senten√ßas mais importantes do texto original usando algoritmos de processamento de linguagem natural
- **Sumariza√ß√£o Abstrativa**: Gera novos textos concisos usando modelos de linguagem T5 treinados especificamente para tarefas de sumariza√ß√£o

A API √© capaz de processar textos de qualquer tamanho, utilizando t√©cnicas de chunking inteligente para textos longos, e oferece controle total sobre o comprimento dos resumos gerados.

## ‚ú® Funcionalidades Principais

### M√©todos de Sumariza√ß√£o
- **Extrativo**: Baseado em sele√ß√£o de senten√ßas-chave usando algoritmo LSA (Latent Semantic Analysis)
- **Abstrativo**: Gera√ß√£o de texto usando modelo mT5 multilingual otimizado para portugu√™s

### Controle de Par√¢metros
- `max_length`: Comprimento m√°ximo do resumo (padr√£o: 150 caracteres, m√°ximo: 1000)
- `min_length`: Comprimento m√≠nimo do resumo (padr√£o: 30 caracteres, m√≠nimo: 10)
- Valida√ß√£o autom√°tica de par√¢metros com mensagens de erro detalhadas

### Processamento Avan√ßado
- **Chunking Inteligente**: Divis√£o autom√°tica de textos longos em partes menores
- **Logging Detalhado**: Monitoramento completo de todas as opera√ß√µes
- **Tratamento de Erros**: Captura e logging de exce√ß√µes com informa√ß√µes √∫teis
- **Valida√ß√£o de Entrada**: Verifica√ß√£o robusta de todos os par√¢metros

## üöÄ Instala√ß√£o e Configura√ß√£o

### Pr√©-requisitos

- **Python**: 3.8 ou superior
- **Git**: Para clonar o reposit√≥rio
- **Token do Hugging Face**: Necess√°rio para acessar modelos (gratuito)

### Instala√ß√£o por Sistema Operacional

#### Windows

```bash
# 1. Clone o reposit√≥rio
git clone https://github.com/seu-usuario/api-sumarizacao-textos.git
cd api-sumarizacao-textos

# 2. Crie um ambiente virtual
python -m venv .venv1

# 3. Ative o ambiente virtual
.venv1\Scripts\activate

# 4. Instale as depend√™ncias
pip install -r requirements.txt

# 5. Configure o token do Hugging Face
# Crie um arquivo chamado API_HuggingFace no diret√≥rio raiz
# Cole seu token do Hugging Face (obtenha em: https://huggingface.co/settings/tokens)
echo "hf_seu_token_aqui" > API_HuggingFace
```

#### Linux/macOS

```bash
# 1. Clone o reposit√≥rio
git clone https://github.com/seu-usuario/api-sumarizacao-textos.git
cd api-sumarizacao-textos

# 2. Crie um ambiente virtual
python3 -m venv .venv1

# 3. Ative o ambiente virtual
source .venv1/bin/activate

# 4. Instale as depend√™ncias
pip install -r requirements.txt

# 5. Configure o token do Hugging Face
echo "hf_seu_token_aqui" > API_HuggingFace
```

### Depend√™ncias Principais

```txt
fastapi>=0.100.0
uvicorn>=0.20.0
pydantic>=2.0.0
transformers>=4.20.0
torch>=2.0.0
sumy>=0.11.0
nltk>=3.8.0
protobuf>=4.21.0
huggingface-hub>=0.15.0
```

### Executando Localmente

```bash
# Ative o ambiente virtual
.venv1\Scripts\activate  # Windows
# ou
source .venv1/bin/activate  # Linux/macOS

# Execute a API
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

A API estar√° dispon√≠vel em:
- **Documenta√ß√£o Interativa**: http://127.0.0.1:8000/docs
- **Documenta√ß√£o Alternativa**: http://127.0.0.1:8000/redoc
- **Endpoint Raiz**: http://127.0.0.1:8000/
- **Verifica√ß√£o de Sa√∫de**: http://127.0.0.1:8000/health

## üìñ Exemplos de Uso

### Verificar Status da API

```bash
curl http://127.0.0.1:8000/
```

**Resposta:**
```json
{
  "message": "Bem-vindo √† API de Sumariza√ß√£o de Textos!",
  "docs": "/docs",
  "methods": ["extractive", "abstractive"],
  "version": "2.0.0"
}
```

### Verificar Sa√∫de do Sistema

```bash
curl http://127.0.0.1:8000/health
```

**Resposta:**
```json
{
  "status": "healthy",
  "timestamp": "2025-09-04T20:44:11.628Z",
  "version": "2.0.0",
  "model": "csebuetnlp/mT5_multilingual_XLSum"
}
```

### Sumariza√ß√£o Extrativa

```bash
curl -X POST "http://127.0.0.1:8000/summarize" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "A intelig√™ncia artificial est√° revolucionando diversos setores da sociedade. Desde o diagn√≥stico m√©dico at√© a an√°lise financeira, os algoritmos de IA demonstram capacidades impressionantes. No entanto, √© fundamental garantir que seu desenvolvimento seja √©tico e respons√°vel.",
    "method": "extractive",
    "max_length": 200,
    "min_length": 50
  }'
```

### Sumariza√ß√£o Abstrativa

```bash
curl -X POST "http://127.0.0.1:8000/summarize" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "A intelig√™ncia artificial est√° revolucionando diversos setores da sociedade. Desde o diagn√≥stico m√©dico at√© a an√°lise financeira, os algoritmos de IA demonstram capacidades impressionantes. No entanto, √© fundamental garantir que seu desenvolvimento seja √©tico e respons√°vel.",
    "method": "abstractive",
    "max_length": 150,
    "min_length": 30
  }'
```

### Exemplo com Python

```python
import requests

# Configura√ß√£o da requisi√ß√£o
url = "http://127.0.0.1:8000/summarize"
payload = {
    "text": "Texto longo que voc√™ deseja resumir...",
    "method": "abstractive",
    "max_length": 200,
    "min_length": 50
}

# Fazendo a requisi√ß√£o
response = requests.post(url, json=payload)
result = response.json()

print("Resumo:", result["summary"])
```

## üìö Documenta√ß√£o da API

### Modelos de Dados

#### TextInput
Modelo para entrada de dados de sumariza√ß√£o.

```python
class TextInput(BaseModel):
    text: str                           # Texto a ser sumarizado (obrigat√≥rio)
    method: str = "extractive"          # M√©todo: 'extractive' ou 'abstractive'
    max_length: int = 150              # Comprimento m√°ximo em caracteres
    min_length: int = 30               # Comprimento m√≠nimo em caracteres
```

**Exemplo:**
```json
{
  "text": "A intelig√™ncia artificial est√° transformando o mundo...",
  "method": "abstractive",
  "max_length": 200,
  "min_length": 50
}
```

#### SummaryOutput
Modelo para sa√≠da de dados de sumariza√ß√£o.

```python
class SummaryOutput(BaseModel):
    summary: str  # Texto resumido gerado
```

**Exemplo:**
```json
{
  "summary": "A IA est√° revolucionando diversos setores, desde medicina at√© finan√ßas, mas seu desenvolvimento deve ser √©tico."
}
```

### Endpoints

#### GET /
Retorna informa√ß√µes b√°sicas sobre a API.

- **URL**: `/`
- **M√©todo**: GET
- **Resposta**: Informa√ß√µes da API

#### GET /health
Verifica o status de sa√∫de da API.

- **URL**: `/health`
- **M√©todo**: GET
- **Resposta**: Status do sistema

#### POST /summarize
Realiza a sumariza√ß√£o do texto fornecido.

- **URL**: `/summarize`
- **M√©todo**: POST
- **Corpo**: Objeto TextInput
- **Resposta**: Objeto SummaryOutput

**C√≥digos de Status:**
- `200`: Sucesso
- `400`: Erro de valida√ß√£o (par√¢metros inv√°lidos)
- `500`: Erro interno do servidor

## üîß Detalhes T√©cnicos

### M√©todo Extrativo

1. **Pr√©-processamento**: Tokeniza√ß√£o e an√°lise lingu√≠stica usando NLTK
2. **An√°lise de Senten√ßas**: Extra√ß√£o de features das senten√ßas (comprimento, posi√ß√£o, palavras-chave)
3. **Pontua√ß√£o LSA**: Aplica√ß√£o do algoritmo Latent Semantic Analysis para identificar senten√ßas mais relevantes
4. **Sele√ß√£o**: Escolha das N senten√ßas com maior pontua√ß√£o
5. **P√≥s-processamento**: Ajuste do comprimento baseado nos par√¢metros `max_length` e `min_length`

**Vantagens:**
- Preserva o texto original
- Mais r√°pido e eficiente
- Menos propenso a erros factuais

### M√©todo Abstrativo

1. **Pr√©-processamento**: Adi√ß√£o do prefixo "summarize: " para orientar o modelo T5
2. **Tokeniza√ß√£o**: Convers√£o do texto em tokens usando o tokenizer do mT5
3. **Chunking (se necess√°rio)**: Divis√£o em partes menores se o texto exceder 512 tokens
4. **Gera√ß√£o**: Uso do pipeline de sumariza√ß√£o com par√¢metros otimizados:
   - `temperature=0.3`: Controle de aleatoriedade
   - `top_p=0.9`: Nucleus sampling
   - `top_k=50`: Limita√ß√£o de candidatos
   - `num_beams=4`: Busca por feixe para qualidade
   - `repetition_penalty=1.2`: Penaliza√ß√£o de repeti√ß√µes
5. **P√≥s-processamento**: Valida√ß√£o do comprimento e ajuste se necess√°rio

**Par√¢metros Avan√ßados:**
- **Beam Search**: Explora m√∫ltiplas possibilidades de gera√ß√£o para encontrar o melhor resumo
- **Repetition Penalty**: Evita frases repetidas no resumo
- **Length Control**: Garante que o resumo respeite os limites especificados

### Valida√ß√µes e Logging

**Valida√ß√µes Implementadas:**
- Verifica√ß√£o de texto vazio
- Valida√ß√£o de `max_length > min_length`
- Limites de `max_length` (m√°ximo 1000)
- Limites de `min_length` (m√≠nimo 10)

**Sistema de Logging:**
- Logs estruturados com timestamps
- N√≠veis: INFO, WARNING, ERROR
- Informa√ß√µes sobre processamento de chunks
- Valores de par√¢metros utilizados
- Tempos de processamento
- Detalhes de erros ocorridos

### Processamento de Textos Longos

Para textos que excedem o limite do modelo (512 tokens):

1. **Divis√£o Inteligente**: Prioriza quebras por senten√ßas para manter coer√™ncia
2. **Fallback por Tokens**: Se a divis√£o por senten√ßas falhar, divide por tokens
3. **Distribui√ß√£o de Comprimento**: Aloca o `max_length` entre os chunks
4. **Combina√ß√£o**: Junta os resumos parciais
5. **Resumo Final**: Se necess√°rio, gera um resumo do resumo combinado

### Diretrizes de Contribui√ß√£o
- Siga o estilo de c√≥digo PEP 8
- Adicione testes para novas funcionalidades
- Atualize a documenta√ß√£o conforme necess√°rio
- Mantenha compatibilidade com vers√µes anteriores

## üìû Suporte

Para suporte ou d√∫vidas:
- Abra uma issue no GitHub
- Consulte a documenta√ß√£o em `/docs`
- Verifique os logs da aplica√ß√£o para diagn√≥stico

## üîÑ Changelog

### Vers√£o 2.0.0
- ‚ú® Reformula√ß√£o completa do m√©todo abstrativo
- üöÄ Adi√ß√£o de controle de par√¢metros `max_length` e `min_length`
- üìä Implementa√ß√£o de logging detalhado
- üîß Chunking inteligente para textos longos
- üõ°Ô∏è Valida√ß√£o robusta de entrada
- üìö Documenta√ß√£o aprimorada

### Vers√£o 1.0.0
- ‚úÖ Implementa√ß√£o b√°sica com m√©todos extrativo e abstrativo
- ‚úÖ API funcional com FastAPI
- ‚úÖ Integra√ß√£o com modelos Hugging Face

---


**Desenvolvido com ‚ù§Ô∏è usando FastAPI e Transformers**
